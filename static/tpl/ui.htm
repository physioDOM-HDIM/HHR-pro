<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>PhysioDom professionnal platform</title>

	<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
	<meta name="apple-mobile-web-app-capable" content="yes"/>
	<meta name="apple-touch-fullscreen" content="yes">
	<meta name="mobile-web-app-capable" content="yes">

	<link rel="shortcut icon" sizes="196x196" href="/img/physiodom_favico.png">
	<link rel="icon" href="/img/physiodom_favico.png">
	<link rel="apple-touch-icon" href="/img/physiodom_favico.png">

	<script src="bower_components/webcomponentsjs/webcomponents.min.js" ></script>

	<link rel="import" href="/bower_components/core-toolbar/core-toolbar.html" >
	<link rel="import" href="/bower_components/core-drawer-panel/core-drawer-panel.html" >
	<link rel="import" href="/bower_components/core-icons/core-icons.html">
	<link rel="import" href="/bower_components/core-icon/core-icon.html">
	
	<link rel="stylesheet" href="styles/layout.css">
	<link rel="stylesheet" href="styles/ui.css">

	<script src="scripts/ui.js" type="text/javascript"></script>
	<script>
		if(window.location !== window.parent.location ) {
			console.info("load in iframe");
			window.parent.location = "/";
		}
	</script>
</head>
<body unresolved>

<style>
	li > div {
		color: white;
		margin: 0px 5px 0px -5px;
		padding-left: 5px;
		background-image: -webkit-linear-gradient(top,#868686 0,#313131 100%);
		background-image: linear-gradient(to bottom,#868686 0,#313131 100%);
		background-repeat: repeat-x;
		filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff868686', endColorstr='#ff313131', GradientType=0);
		text-shadow: 1px 1px 0px black;
	}

	li > div:before {
		font-family: 'Glyphicons Halflings'; /* essential for enabling glyphicon */
		content: "\e114"; /* adjust as needed, taken from bootstrap.css */
		float: right; /* adjust as needed */

	}

	li.collapsed > ul {
		display:none;
	}

	li.collapsed > div:before {
		/* symbol for "collapsed" panels */
		content: "\e080"; /* adjust as needed, taken from bootstrap.css */
	}

	li.selected {	background:white; }
	li.selected > a { color:black; }
	.logo {
		width: 150px;
		height: 40px;
		background-repeat: no-repeat;
		margin: 0px;
		background-image: url(https://physiodom.telecomsante.loc/img/logo.svg); 
		background-size: 100%; 
		background-position: 50% 50%;
	}
	core-icon[icon=menu] {
		margin-left: -20px;
	}
	@media (max-width: 992px) {
		core-icon[icon=menu] {
			visibility:visible;
		}
		.logo {
			width:40px;
			background-image: url(https://physiodom.telecomsante.loc/img/logo-mini.svg);
		}
	}
	@media (min-width: 992px) {
		core-icon[icon=menu] {
			visibility:hidden
		}
	}
	div.menu {
		display:-webkit-flex;
		display: -ms-flexbox;
		display:flex;
		-ms-flex-align: center;
		-webkit-align-items: center;
		align-items: center;
		margin-left:0px;
	}
	core-toolbar div.beneficiary {
		text-align: left; 
		width:100px;
		font-size: 70%;
		overflow: hidden;
	}
	core-toolbar div.beneficiary label {
		white-space: nowrap;
		text-overflow: ellipsis;
		width: 100%;
		overflow: hidden;
	}
</style>
<style shim-shadowdom>

	
</style>

<core-toolbar>
	<div class="menu" onclick="toggleDrawer()" >
		<core-icon icon="menu" ></core-icon>
		<div class="logo"></div>
	</div>
	<span class="spacer"></span>
	<div class="title"></div>
	<span class="spacer"></span>
	<div class="beneficiary">beneficiary<br>
		<label id="beneficiary"><a href="/beneficiary/overview" target="main">-</a></label>
	</div>
	<div style="width:100px;text-align:right;font-size: 70%;">{{account.firstname}}. {{account.lastname}}<br/><a href="/logout">Disconnect</a></div>
</core-toolbar>

<core-drawer-panel responsiveWidth="992px">
	<div drawer>
		<ul class="tree menu">
			<li class="menuitem"><a href="/beneficiaries" target="main">Select beneficiary</a></li>
			<li class="menuitem"><a href="/beneficiary/overview" target="main">Beneficiary overview</a></li>
			<li class="collapsed">
				<div>Quick look on HHR</div>
				<ul class="tree">
					<li class="menuitem"><a href="tpl/messages.htm" target="main">Messages to home</a></li>
					<li class="menuitem"><a href="tpl/interProfessional.htm" target="main">Inter professional messages</a></li>
					<li class="menuitem"><a href="tpl/agenda.htm" target="main">Agenda</a></li>
					<li class="menuitem"><a href="tpl/data.htm" target="main">Physiological data</a></li>
				</ul>
			</li>
			<li class="collapsed">
				<div>Healthcare</div>
				<ul class="tree">
					<li class="menuitem">Summary</li>
					<li class="menuitem">Care plan</li>
					<li class="menuitem">Attachments</li>
					<li class="menuitem">Professionals report</li>
				</ul>
			</li>
			<li class="collapsed">
				<div>Social</div>
				<ul class="tree">
					<li class="menuitem"><a href="tpl/socialPlan.htm" target="main">Social care plan</a></li>
					<li class="menuitem">Attachments</li>
				</ul>
			</li>

			<li class="collapsed">
				<div>Physiological Data</div>
				<ul class="tree">
					<li class="menuitem"><a href="tpl/dataRecord.htm" target="main">Constants registration</a></li>
					<li class="menuitem">Attachments</li>
					<li class="menuitem">Warning threshold</li>
				</ul>
			</li>
			<li class="menuitem"><a href="/directory" target="main">Directory</a></li>
			<li class="menuitem"><a href="/prescription/general" target="main">General Data</a></li>
			<li class="menuitem"><a href="/prescription/hdim" target="main">HDIM Data</a></li>
			<li class="menuitem"><a href="/prescription/symptom" target="main">Symptom assessments</a></li>
			</li>
		</ul>
		{% if admin %}
		<ul class="admin tree">
			<li class="menuitem"><a href="/settings/lists" target="main">Lists management</a></li>
			<li class="menuitem"><a href="/questionnaires" target="main">Questionnaires</a></li>
		</ul>
		{% endif %}
	</div>
	<div main>
		<iframe name="main" src="/beneficiaries" scrolling="no"></iframe>
	</div>
</cora-drawer-panel>

<script>

	document.addEventListener("DOMContentLoaded", function(event) {

		// if(window.navigator.standalone) {
		var menuEntries = document.querySelectorAll("ul.tree li");
		[].slice.call(menuEntries).forEach( function(entry) {
			switch( entry.className ) {
				case "menuitem" :
					entry.addEventListener("click", function(event) {
						event.preventDefault();

						var aurl = event.currentTarget.querySelector("a").getAttribute("href");
						if (aurl) {
							var selected = document.querySelector("[drawer] ul.tree li.selected");
							if(selected) selected.classList.remove("selected");
							event.currentTarget.classList.add("selected");
							show(aurl);
						}
					},false);
					break;
				default:
					entry.addEventListener("click", function(e) {
						var parent = e.target.parentNode;
						parent.classList.toggle("collapsed");
					}, false);
					break;
			}
		});
	});

	function toggleDrawer() {
		var drawer = document.querySelector("core-drawer-panel");
		drawer.togglePanel();
	}
	
	function closeDrawer() {
		var drawer = document.querySelector("core-drawer-panel");
		drawer.closeDrawer();
	}
</script>
</body>
</html>
