{% extends './page.htm' %}

{% block title %}{{ "Basic health services" | i18n }}{% endblock %}

{% block head %}
{% parent %}
<style>
	div.col05 {
		width: 130px;
	}
	
	div.service {
		padding: 5px 0px;
		border: 1px solid lightgray;
		border-bottom: 2px solid black;
		margin-bottom: 10px;
	}
	
	div.service.title2 {
		background: chocolate;
	}
	
	div.control button {
		margin-left: 10px;
	}
	
	div.service label {
		font-weight: bold;
	}
	
	div.row.h1 {
		line-height: 25px;
	}
</style>
{% endblock %}

{% block content %}
<div class="row title">
	<label class="title">Basic health services</label>
</div>

<div class="row control" style="margin-bottom:20px">
	<span class="spacer"></span>
	<button type="button" class="blue" onclick="showForm()">{{"Add a new service"|i18n}}</button>
</div>

<div class="service">
	<div class="row title2">
		<div>Titre de la prestation : month</div>
	</div>
	
	<div class="content">
		<div class="row h1">
			<div class="col05"></div>
			<div class="col">
				<label>{{"Prescriber"|i18n}}</label><span>Claire Archer</span>
			</div>
			<div class="col">
				<label>{{"Provider"|i18n}}</label><span>Albert Dupont</span>
			</div>
		</div>
		
		<div class="row h1">
			<div class="col05"></div>
			<div class="col" style="width:200px">
				<label>{{"Detail of the service"|i18n}}</label>
			</div>
		</div>
		<div class="row h1">
			<div class="col05"></div>
			<div class="col">
			<textarea rows="5" cols="60" wrap="hard">detail of the service
Max 5 lines of 60 characters</textarea>
			</div>
		</div>
		
		<div class="row h1">
			<div class="col05"></div>
			<div class="col">
				<label>{{"Start date"|i18n}}</label><span>data.startDate</span>
			</div>
			<div class="col">
				<label>{{"End date"|i18n}}</label><span>data.endDate</span>
			</div>
		</div>
		
		<div class="row h1">
			<div class="col05"></div>
			<div class="col">
				<label>{{"Start at"|i18n}}</label><span>10:00</span>
			</div>
			<div class="col">
				<label>{{"Time of service"|i18n}}</label><span>02:00</span>
			</div>
		</div>
		
		<div class="row h1">
			<div class="col05"></div>
			<div class="col">
				<label>{{"Frequency"|i18n}}</label><span>every month</span>
			</div>
		</div>
		
		<div class="row h1">
			<div class="col05"></div>
			<div class="col">
				<ul>
					<li class="day">9th of month</li>
					<li class="day">24th of month</li>
				</ul>
			</div>
		</div>
		
		<div class="row h1 control">
			<span class="spacer"></span>
			<button type="button" class="small red">{{"Delete"|i18n}}</button>
			<button type="button" class="small green">{{"Edit"|i18n}}</button>
		</div>
	</div>
</div>

<div class="service">
	<div class="row h1">
		<div class="bold data-text">Titre de la prestation : semaine</div>
	</div>
	
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<label>{{"Prescriber"|i18n}}</label><span>Claire Archer</span>
		</div>
		<div class="col">
			<label>{{"Provider"|i18n}}</label><span>Albert Dupont</span>
		</div>
	</div>
	
	<div class="row h1">
		<div class="col05"></div>
		<div class="col" style="width:200px">
			<label>{{"Detail of the service"|i18n}}</label>
		</div>
	</div>
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<textarea rows="5" cols="60" wrap="hard">detail of the service
Max 5 lines of 60 characters</textarea>
		</div>
	</div>
	
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<label>{{"Start date"|i18n}}</label><span>data.startDate</span>
		</div>
		<div class="col">
			<label>{{"End date"|i18n}}</label><span>data.endDate</span>
		</div>
	</div>
	
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<!-- <label>{{"Start at"|i18n}}</label><span>10:00</span> -->
		</div>
		<div class="col">
			<label>{{"Time of service"|i18n}}</label><span>02:00</span>
		</div>
	</div>
	
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<label>{{"Frequency"|i18n}}</label><span>every X week</span>
		</div>
	</div>
	
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<ul>
				<li class="day">Monday {{"at" | i18n}} 10:00</li>
				<li class="day">Thursday {{"at" | i18n}} 11:00</li>
				<li class="day">Saturday {{"at" | i18n}} 15:00</li>
			</ul>
		</div>
	</div>
	
	<div class="row h1 control">
		<span class="spacer"></span>
		<button type="button" class="small red">{{"Delete"|i18n}}</button>
		<button type="button" class="small green">{{"Edit"|i18n}}</button>
	</div>
</div>

<div class="service">
	<div class="row h1">
		<div class="bold data-text">Titre de la prestation : daily</div>
	</div>
	
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<label>{{"Prescriber"|i18n}}</label><span>Claire Archer</span>
		</div>
		<div class="col">
			<label>{{"Provider"|i18n}}</label><span>Albert Dupont</span>
		</div>
	</div>
	
	<div class="row h1">
		<div class="col05"></div>
		<div class="col" style="width:200px">
			<label>{{"Detail of the service"|i18n}}</label>
		</div>
	</div>
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<textarea rows="5" cols="60" wrap="hard">detail of the service
Max 5 lines of 60 characters</textarea>
		</div>
	</div>
	
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<label>{{"Start date"|i18n}}</label><span>data.startDate</span>
		</div>
		<div class="col">
			<label>{{"End date"|i18n}}</label><span>data.endDate</span>
		</div>
	</div>
	
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<label>{{"Start at"|i18n}}</label><span>10:00</span>
		</div>
		<div class="col">
			<label>{{"Time of service"|i18n}}</label><span>02:00</span>
		</div>
	</div>
	
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<label>{{"Frequency"|i18n}}</label><span>every day (except week-end)</span>
		</div>
	</div>
	
	<!--
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<ul>
				<li class="day">Monday {{"at" | i18n}} 10:00</li>
			</ul>
		</div>
	</div>
	-->
	
	<div class="row h1 control">
		<span class="spacer"></span>
		<button type="button" class="small red">{{"Delete"|i18n}}</button>
		<button type="button" class="small green">{{"Edit"|i18n}}</button>
	</div>
</div>

<div class="service">
	<div class="row h1">
		<div class="bold data-text">Titre de la prestation : ponctual</div>
	</div>
	
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<label>{{"Prescriber"|i18n}}</label><span>Claire Archer</span>
		</div>
		<div class="col">
			<label>{{"Provider"|i18n}}</label><span>Albert Dupont</span>
		</div>
	</div>
	
	<div class="row h1">
		<div class="col05"></div>
		<div class="col" style="width:200px">
			<label>{{"Detail of the service"|i18n}}</label>
		</div>
	</div>
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<textarea rows="5" cols="60" wrap="hard">detail of the service
Max 5 lines of 60 characters</textarea>
		</div>
	</div>
	
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<label>{{"Start date"|i18n}}</label><span>data.startDate</span>
		</div>
		<div class="col">
			<label>{{"End date"|i18n}}</label><span>data.endDate</span>
		</div>
	</div>
	
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<label>{{"Start at"|i18n}}</label><span>10:00</span>
		</div>
		<div class="col">
			<label>{{"Time of service"|i18n}}</label><span>02:00</span>
		</div>
	</div>
	
	<!--
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<label>{{"Frequency"|i18n}}</label><span>every month</span>
		</div>
	</div>
	-->
	
	<div class="row h1">
		<div class="col05"></div>
		<div class="col">
			<ul>
				<li class="day">Thursday 3 september 2015 {{"at" | i18n}} 10:00</li>
			</ul>
		</div>
	</div>
	
	
	<div class="row h1 control">
		<span class="spacer"></span>
		<button type="button" class="small red">{{"Delete"|i18n}}</button>
		<button type="button" class="small green">{{"Edit"|i18n}}</button>
	</div>
</div>

<div class="row control">
	<span class="spacer"></span>
	<button type="button" class="blue" onclick="showForm()">{{"Add a new service"|i18n}}</button>
</div>

<script>
	var text = document.querySelector("textarea");
	
	function doGetCaretPosition(ctrl) {
		var CaretPos = 0;	// IE Support
		if (document.selection) {
			ctrl.focus();
			var Sel = document.selection.createRange();
			Sel.moveStart('character', -ctrl.value.length);
			CaretPos = Sel.text.length;
		}
		// Firefox support
		else if (ctrl.selectionStart || ctrl.selectionStart == '0')
			CaretPos = ctrl.selectionStart;
		return (CaretPos);
	}
	
	function setCaretPosition(ctrl, pos) {
		if (ctrl.setSelectionRange) {
			ctrl.focus();
			ctrl.setSelectionRange(pos, pos);
		}
		else if (ctrl.createTextRange) {
			var range = ctrl.createTextRange();
			range.collapse(true);
			range.moveEnd('character', pos);
			range.moveStart('character', pos);
			range.select();
		}
	}
	
	text.addEventListener("keyup", function () {
		// 60 caractÃ¨res par lignes
		var val = this.value;
		var lines = val.split("\n");
		var line, count = 0;
		var pos = doGetCaretPosition(this);
		var nb = 0;
		cut = 0;
		do {
			if (lines[count].length > 60) {
				line = lines[count].slice(60);
				lines[count] = lines[count].slice(0, 60);
				// console.log( "("+count+") line : " + line );
				// console.log(lines[count] +" - "+ line);
				if (!cut) {
					cut = nb + 60;
				}
				if (lines[count + 1]) {
					lines[count + 1] = line + lines[count + 1]
				} else {
					lines.push(line);
				}
			} else if (!cut) {
				nb += lines[count].length + (count + 1 < lines.length ? 1 : 0);
			}
		} while (lines[++count]);
		this.value = "";
		for (i = 0, l = lines.length; i < l; i++) {
			this.value += (i !== 0 ? "\n" : "") + lines[i];
		}
		// console.log( "pos ",pos, nb, cut );
		setCaretPosition(this, pos + (cut && pos > cut ? 1 : 0));
	}, false);
</script>
{% include "./modal.htm" %}
{% endblock %}