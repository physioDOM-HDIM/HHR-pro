<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>Select beneficiary</title>

	<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
	<meta name="apple-mobile-web-app-capable" content="yes"/>
	<meta name="apple-touch-fullscreen" content="yes">
	<meta name="mobile-web-app-capable" content="yes">

	<link rel="shortcut icon" sizes="196x196" href="/img/physiodom_favico.png">
	<link rel="icon" href="/img/physiodom_favico.png">
	<link rel="apple-touch-icon" href="/img/physiodom_favico.png">

	<link rel="stylesheet" href="/styles/iframe.css" charset="UTF-8">
	<link rel="stylesheet" href="/styles/theme.css" charset="UTF-8">
	
	<script src="/scripts/common.js"></script>

	<script src="recipients.js"></script>
	<script>
		if(window.location === window.parent.location ) {
			console.info("not in iframe");
			window.location = "/?url="+window.location;
		}
	</script>
	
	<script src="../bower_components/platform/platform.js"></script>
	<link rel="import" href="../bower_components/tsante-listpager/tsante-listpager.html">
	<link rel="import" href="../bower_components/zdk-panel/zdk-panel.html">
</head>
<body>
<style>
	div.fixedTable {
		margin-top: 20px;
		flex-grow: 1;
		width: 100%;
	}

	input[type=text] {
		height: 34px;
		padding: 6px 12px;
		font-size: 14px;
		line-height: 1.42857143;
		border: 1px solid #ccc;
		border-radius: 4px;
	}

	.panel-heading .panel-title:after {
		/* symbol for "opening" panels */
		font-family: 'Glyphicons Halflings'; /* essential for enabling glyphicon */
		content: "\e114"; /* adjust as needed, taken from bootstrap.css */
		float: right; /* adjust as needed */
		color: grey; /* adjust as needed */
	}

	.panel-heading.collapsed .panel-title:after {
		/* symbol for "collapsed" panels */
		content: "\e080"; /* adjust as needed, taken from bootstrap.css */
	}

	.panel-heading {
		cursor: pointer;
	}

	.form-horizontal .form-group {
		margin: auto !important;
	}

	.filter label {
		width: 100px;
		padding: 0px;
	}
	
	tsante-list {
		margin-top:30px;
	}
	div.item {
		height: 40px;
		display:flex;
		align-items: center;
	}
	div.item:nth-child(even) {
		background:white;
	}
	div.item:nth-child(odd) {
		background:#DFDFDF;
	}
	div.item > span {
		padding: 1px 5px;
	}
	div.item button {
		margin: 0 5px 0px 5px;
		background: #1983DF;
		border: 1px solid black;
		font-size: 12px;
		color: white;
		border-radius: 3px;
		line-height: 1.5;
		vertical-align: middle;
		white-space: nowrap;
		padding: 1px 5px;
	}
	.row { display:flex; }
	.col { flex:1; display:flex; }
	.collabel { flex:1 }
	.colcontent { flex:2 }
	.spacer { flex:1 }
</style>

<div class="main">
	<zdk-panel heading="Filter / Sort" height="250" collapsable="true" collapsed="true">
		<div>
			<div class="row">
				<div class="col">
					<label class="collabel" for="lastname">Last Name : </label>
					<div class="colcontent">
						<input type="text" id="lastname">
					</div>
				</div>
				<div class="col">
					<label class="collabel" for="Perimeter">Perimeter : </label>
					<div class="colcontent">
						<input type="text" id="perimeter">
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<label class="collabel" for="zipcode">Zip Code : </label>
					<div class="colcontent">
						<input type="text" id="zipcode">
					</div>
				</div>
				<div class="col">
					<label class="collabel" for="city">City : </label>
					<div class="colcontent">
						<input type="text" id="city">
					</div>
				</div>
			</div>
			<div style="height:10px">&nbsp;</div>
			<div class="row" style="text-align: right;padding-right: 10px;">
				<span class="spacer"></span>
				<button type="button" class="btn btn-primary">Reset</button>
				<button type="button" class="btn btn-primary btn-success">Filter</button>
			</div>
		</div>
	</zdk-panel>
	
	<tsante-list url="/api/beneficiaries" pg="1" auto="true" unresolved id="tsanteList">
		<template is="auto-binding" repeat="{{item in list.items}}">
			<div class="item">
				<span style="flex:2">{{item.name.family}} {{item.name.given}}</span>
				<span style="flex:1">Perimeter : {{item.perimeter?item.perimeter:"-"}}</span>
				<span style="flex:1">Birthdate : {{item.birthdate}}</span>
				<span><button>select</button></span>
			</div>
		</template>
	</tsante-list>
</body>
</html>